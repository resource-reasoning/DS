

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%styles
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\sort}[1]{\protect\scalebox{0.9}{\textsc{#1}}}
\newcommand{\predFont}[1]{\ensuremath{\mathtt{#1}}}
\newcommand{\funcFont}[1]{\ensuremath{\mathsf{#1}}}
\newcommand{\pred}[2]{\predFont{#1}(#2)}
\newcommand{\predn}[1]{\predFont{#1}}
\newcommand{\func}[2]{\funcFont{#1}(#2)}
\newcommand{\funcn}[1]{\funcFont{#1}}
\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\qqquad}{\qquad\quad}
\newcommand{\qqqquad}{\qquad\qquad}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% References
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\defin}{\text{Def.}\xspace}
\newcommand{\fig}{\text{Fig.}\xspace}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Programming language 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Meta variables
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\Programs}{\sort{Prog}}
\newcommand{\prog}{\mathbb{P}}
\newcommand{\IntermediatePrograms}{\sort{IProg}}
\newcommand{\iprog}{\prog^{\uparrow}}
\newcommand{\progext}{\iprog}
\newcommand{\Transactions}{\sort{Trans}}
\newcommand{\trans}{\mathbb{T}}
\newcommand{\cmd}{\trans}
\newcommand{\Expressions}{\sort{Expr}}
\newcommand{\expr}{\mathbb{E}}
\newcommand{\Booleans}{\sort{Bool}}
\newcommand{\bool}{\mathbb{B}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Syntax
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\pointsto}{\mapsto}
\newcommand{\pt}{\pointsto}
\newcommand{\sep}{\mathbin{*}}
\newcommand{\ppar}{\mathbin{\|}}
\newenvironment{transaction}{%
    \left\lbrack%
    \begin{array}{@{}l@{}}
}{%
    \end{array}%
    \right\rbrack
}
\newcommand{\ptrans}[1]{%rest
\begin{transaction} #1 \end{transaction}%
}
\newcommand{\pruntrans}[2]{%
    \left\lbrack \! \left\lbrack \begin{array}{@{}l@{}} #1 \end{array} \right\rbrack\!  \right\rbrack_{#2}
}
\newenvironment{parl}{%
    \begin{array}{@{}c || c@{}}
}{%
    \end{array}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Semantics
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\transfersto}[1][]{\mathbin{\leadsto_{#1}}}
\newcommand{\toL}{\transfersto[l]}
\newcommand{\toT}[1]{\overset{#1}{\transfersto[t]}}
\newcommand{\toG}[1]{\overset{#1}{\transfersto[g]}}
\newcommand{\Translabel}{\sort{Label}}
\newcommand{\translabel}{\iota}
\newcommand{\lb}{\translabel}
\newcommand{\lbID}{{\texttt{id}}}
\newcommand{\lbF}[1]{\texttt{fork}(#1)}
\newcommand{\lbC}[1]{\texttt{cmt}(#1)}
\newcommand{\lbJ}[1]{\texttt{join}(#1)}
\newcommand{\lbS}[1]{\texttt{st}(#1)}
\newcommand{\lbRS}[1]{\texttt{rst}(#1)}

\newcommand{\snapshot}[2]{\func{snapshot}{#1, #2}}
\newcommand{\snapshotName}{\funcFont{snapshot}}
\newcommand{\cancommit}[4]{\pred{can\_commit}{#1, #2, #3, #4}}
\newcommand{\cancommitName}{\predFont{can\_commit}}
\newcommand{\wfhist}[4]{\pred{wf\_hist}{#1, #2, #3, #4}}
\newcommand{\wfhistName}{\predFont{wf\_hist}}
\newcommand{\consistent}[4]{\pred{consistent}{#1, #2, #3, #4}}
\newcommand{\consistentName}{\funcFont{consistent}}
\newcommand{\commitName}{\funcFont{commit}}
\newcommand{\commit}[6]{\func{commit}{#1, #2, #3, #4, #5, #6}}
\newcommand{\fphVal}[1][\fph]{#1^{\textsf{v}}}
\newcommand{\fphFP}[1][\fph]{#1^{\textsf{fp}}}



%maths
\newcommand{\for}[1]{\forall #1.\;}
\newcommand{\exsts}[1]{\exists #1.\;}
\newcommand{\myset}[2]{
\ensuremath{
	\left\{
	\begin{array}{@{} l | l @{}}
		\begin{array}{@{} l @{}}
			#1
		\end{array}
		& 
		\begin{array}{@{} l @{}}
			#2
		\end{array}
	\end{array}
	\right\}
}
}
\newcommand{\iffdef}{\ensuremath{\stackrel{\textnormal{def}}{\Longleftrightarrow}}}

%semantics

%logic
\newcommand{\LExpressions}{\sort{LExpr}}
\newcommand{\lexpr}{\ensuremath{\mathit e}}
%\newcommand{\V}[1]{\ensuremath{\mathit{#1}}}
\newcommand{\V}[1]{\textsc{\lowercase{#1}}}
\newcommand{\LVars}{\sort{LVar}}
\newcommand{\leval}[2]{\eval{#1}_{#2}}
\newcommand{\LEnv}{\sort{LEnv}}
\newcommand{\Localassertion}{\sort{LAst}}
\newcommand{\asstrue}{\textnormal{true}}
\newcommand{\True}{\asstrue}
\newcommand{\assfalse}{\textnormal{false}}
\newcommand{\False}{\assfalse}
\newcommand{\assemp}{\textnormal{emp}}
\newcommand{\emp}{\assemp}
\newcommand{\cass}[2]{\ensuremath{\left[#1\right]^{#2}}}
\newcommand{\aeval}[2][\lenv, \stk]{\eval{#2}_{#1}}
\newcommand{\auxeval}[2][\lenv, \stk, \ts]{\eval{#2}^{\mathsf{A}}_{#1}}

%model
\newcommand{\compose}[1]{\bullet_{#1}}
\newcommand{\composeEq}{\compose{=}}

\newcommand{\Kaps}{\sort{Kap}}
\newcommand{\kap}{\kappa}
\newcommand{\composeK}{\ensuremath{\compose{\kap}}}
\newcommand{\unitK}{\ensuremath{\unitelem{\kap}}}

\newcommand{\Caps}{\sort{Cap}}
\newcommand{\ca}{\ensuremath{\mathit c}}
\newcommand{\composeC}{\ensuremath{\compose{\ca}}}
\newcommand{\unitC}{\ensuremath{\unitelem{\ca}}}
\newcommand{\LStates}{\sort{LState}}
\newcommand{\ls}{\ensuremath{\ell}}
\newcommand{\composeLS}{\compose{\ell}}
\newcommand{\unitLS}{\unitelem{\ell}}
\newcommand{\lsFPH}[1]{\ensuremath{#1^{\fph}}}
\newcommand{\lsCap}[1]{\ensuremath{#1^{\ca}}}

\newcommand{\LGStates}{\sort{LGState}}
\newcommand{\lgs}{\ensuremath{\mathit l}}
\newcommand{\composeLGS}{\compose{\mathsf{L}}}
\newcommand{\unitLGS}{\unitelem{\mathsf{L}}}
\newcommand{\lgsTSH}[1]{\ensuremath{#1^{\mathsf{H}}}}
\newcommand{\lgsCap}[1]{\ensuremath{#1^{\mathsf{C}}}}

\newcommand{\SStates}{\sort{SState}}
\newcommand{\gs}{\ensuremath{\mathit s}}
\newcommand{\composeS}{\compose{\mathsf{S}}}
\newcommand{\unitS}{\unitelem{\mathsf{S}}}
\newcommand{\flattenS}[1]{\ensuremath{\left\lfloor#1\right\rfloor}}


\newcommand{\Heaps}{\sort{Heap}}
\newcommand{\Heap}{\Heaps}
\newcommand{\composeH}{\compose{\hp}}
\newcommand{\unitH}{\unitelem{\hp}}
\newcommand{\Stack}{\sort{Stack}}
\newcommand{\Timestamp}{\sort{TimeStamp}}
\newcommand{\Addr}{\sort{Addr}}
\newcommand{\Loc}{\Addr}
\newcommand{\Val}{\sort{Val}}
\newcommand{\Var}{\sort{Var}}
\newcommand{\State}{\sort{State}}
\newcommand{\Localstate}{\sort{LocalState}}
\newcommand{\Threadstate}{\sort{ThreadState}}
\newcommand{\Threadpool}{\sort{ThreadPool}}
\newcommand{\threadpool}{\eta}
\newcommand{\tdpl}{\threadpool}
\newcommand{\thpl}{\threadpool}
\newcommand{\Nat}{\mathbb{N}}
\newcommand{\Real}{\mathbb{R}}
\newcommand{\Transid}{\sort{TransID}}
\newcommand{\TransID}{\Transid}
\newcommand{\transid}{\alpha}
\newcommand{\tsid}{\transid}
\newcommand{\settrans}{\mathcal{T}}
\newcommand{\setlabels}{\mathcal{L}}
\newcommand{\Threadid}{\sort{ThreadID}}
\newcommand{\ThreadID}{\Threadid}
\newcommand{\threadid}{i}
\newcommand{\thid}{\threadid}
\newcommand{\nat}{n}
\newcommand{\parfun}{\rightharpoonup}
\newcommand{\parfinfun}{\overset{fin}{\rightharpoonup}}
\newcommand{\heap}{h}
\newcommand{\hp}{\heap}
\newcommand{\Timestampheap}{\sort{TSHeap}}
\newcommand{\TSHeaps}{\Timestampheap}
\newcommand{\composeTS}{\compose{\tshp}}
\newcommand{\unitTS}{\unitelem{\tshp}}
\newcommand{\timestampheap}{\ensuremath{\mathit{H}}}
\newcommand{\globalheap}{\timestampheap}
\newcommand{\tshp}{\globalheap}
\newcommand{\ghp}{\globalheap}
\newcommand{\stack}{\ensuremath{\sigma}}
\newcommand{\stk}{\stack}
\newcommand{\timestamp}{t}
\newcommand{\ts}{\timestamp}
\newcommand{\loc}{a}
\newcommand{\val}{v}
\newcommand{\var}{\vx}
\newcommand{\logicvar}{{\V x}}
\newcommand{\lvar}{{\V x}}
\newcommand{\localstate}{\sigma}
\newcommand{\lstt}{\localstate}
\newcommand{\Readset}{\sort{ReadSet}}
\newcommand{\readset}{rs}
\newcommand{\rs}{\readset}
\newcommand{\Writeset}{\sort{WriteSet}}
\newcommand{\writeset}{ws}
\newcommand{\ws}{\writeset}
\newcommand{\Operation}{\sort{ETag}}
\newcommand{\operation}{e}
\newcommand{\op}{\operation}
\newcommand{\rop}{\texttt{R}}
\newcommand{\opr}{\rop}
\newcommand{\wop}{\texttt{W}}
\newcommand{\opw}{\wop}
\newcommand{\sop}{\texttt{S}}
\newcommand{\ops}{\sop}
\newcommand{\eop}{\texttt{E}}
\newcommand{\ope}{\eop}
\newcommand{\uop}{\texttt{U}}
\newcommand{\upe}{\eop}
\newcommand{\Heapwithfingerprint}{\sort{FPHeap}}
\newcommand{\FPHeaps}{\Heapwithfingerprint}
\newcommand{\composeFP}{\compose{\fph}}
\newcommand{\unitFP}{\unitelem{\fph}}
\newcommand{\addR}{\ensuremath{\stackrel{\rfp}{\hookleftarrow}}}
\newcommand{\addW}{\ensuremath{\stackrel{\wfp}{\hookleftarrow}}}
\newcommand{\addRFP}[1]{#1 \addR}
\newcommand{\addWFP}[1]{#1 \addW}
\newcommand{\heapwithfingerprint}{\ensuremath{\mathit{h}}}
\newcommand{\Heapwithfingerprintcapability}{\sort{HeapWithFingerprintCapability}}
\newcommand{\heapwithfingerprintcapability}{\hat{\hat{h}}}
\newcommand{\fphpcap}{\heapwithfingerprintcapability}
\newcommand{\hpfp}{\heapwithfingerprint}
\newcommand{\fphp}{\heapwithfingerprint}
\newcommand{\fph}{\heapwithfingerprint}
\newcommand{\Fingerprint}{\sort{FingerPrint}}
\newcommand{\fingerprint}{f}
\newcommand{\fp}{\fingerprint}
\newcommand{\wfp}{\texttt{w}}
\newcommand{\rfp}{\texttt{r}}
\newcommand{\state}{\Sigma}
\newcommand{\stt}{\state}
\newcommand{\setstt}{\mathcal{G}}
\newcommand{\lsession}{{\texttt{so}}}
\newcommand{\Globalassertion}{\sort{Ast}}
\newcommand{\globalassertion}{P}
\newcommand{\glass}{\globalassertion}
\newcommand{\gpre}{\globalassertion}
\newcommand{\gpost}{Q}

\newcommand{\localassertion}{p}
\newcommand{\lcass}{\localassertion}
\newcommand{\lpre}{\localassertion}
\newcommand{\lpreext}{\localassertion^{\uparrow}}
\newcommand{\lpost}{q}
\newcommand{\lpostext}{\lpost^{\uparrow}}
\newcommand{\lframe}{r}
\newcommand{\bass}{P\hspace{-6pt}P}
\newcommand{\bpre}{\bass}
\newcommand{\bpost}{Q\hspace{-6pt}Q}
\newcommand{\World}{\sort{World}}
\newcommand{\world}{\ensuremath{\mathit{w}}}
\newcommand{\wfName}{\ensuremath{\predFont{wf}}}
\newcommand{\wf}[1]{\ensuremath{\wfName(#1)}}
\newcommand{\composeW}{\compose{\world}}
\newcommand{\unitW}{\unitelem{\world}}
\newcommand{\Actions}{\sort{Action}}
\newcommand{\action}{\textnormal{a}}
\newcommand{\captk}[1]{\left[#1\right]}
\newcommand{\Capabilityid}{\sort{CapabilityId}}
\newcommand{\capabilityid}{\gamma}
\newcommand{\capid}{\capabilityid}
\newcommand{\Capabilityassertion}{\sort{CapabilityAssertion}}
\newcommand{\capabilityassertion}{t}
\newcommand{\capass}{\capabilityassertion}
\newcommand{\InterferenceAssertion}{\sort{IAst}}
\newcommand{\Interferenceassertion}{\InterferenceAssertion}
\newcommand{\IAssertions}{\InterferenceAssertion}
\newcommand{\SIGraphs}{\sort{SIGraphs}}
\newcommand{\sig}{\ensuremath{\mathcal{G}}}

\newcommand{\ieval}[2][\lenv, \stk]{\eval{#2}_{#1}}
\newcommand{\interferenceassertion}{I}
\newcommand{\intass}{\interferenceassertion}
\newcommand{\Interference}{\sort{Inter}}
\newcommand{\intf}{\ensuremath{\mathcal I}}
\newcommand{\inter}{\intf}
\newcommand{\Regionid}{\sort{RegionId}}
\newcommand{\regionid}{r}
\newcommand{\rid}{\regionid}
\newcommand{\Capability}{\sort{Capability}}
\newcommand{\capability}{c}
\newcommand{\capb}{\capability}
\newcommand{\cstate}{\mathcal{C}}
\newcommand{\setcap}{\Gamma}
\newcommand{\Logicalstate}{\sort{LogicalState}}
\newcommand{\logicalstate}{\phi}
\newcommand{\lstate}{\logicalstate}
\newcommand{\Sharestate}{\sort{ShareState}}
\newcommand{\sharestate}{\delta}
\newcommand{\sstate}{\sharestate}
\newcommand{\rely}{R}
\newcommand{\guarantee}{G}
\newcommand{\lenv}{\iota}
\newcommand{\grte}{\guarantee}
\newcommand{\agree}[2]{\vdash #1, #2 \ \texttt{agree} \ }
\newcommand{\stable}[2]{#1 \vdash #2 \ \texttt{stable} \ }
\newcommand{\mergable}[4]{#1 \vdash  #2, #3 \ \texttt{merge} \ #4 \ }
\newcommand{\propagate}[3]{\vdash  #1, #2 \ \texttt{propagate} \ #3 \ }
\newcommand{\so}{\texttt{so}}
\newcommand{\po}{\texttt{po}}
\newcommand{\ww}{\texttt{ww}}
\renewcommand{\wr}{\texttt{wr}}
\newcommand{\rw}{\texttt{rw}}
\newcommand{\vis}{\texttt{vis}}
\newcommand{\ar}{\texttt{ar}}
\newcommand{\tvis}{\texttt{tvis}}
\newcommand{\tar}{\texttt{tar}}
\newcommand{\rso}{\overset{\texttt{so}}{\to}}
\newcommand{\rww}{\overset{\texttt{ww}}{\to}}
\newcommand{\rwr}{\overset{\texttt{wr}}{\to}}
\newcommand{\rrw}{\overset{\texttt{rw}}{\to}}
\newcommand{\rvis}{\overset{\texttt{vis}}{\to}}
\newcommand{\rar}{\overset{\texttt{ar}}{\to}}
\newcommand{\rtvis}{\overset{\texttt{tvis}}{\to}}
\newcommand{\rtar}{\overset{\texttt{tar}}{\to}}

%notation
\newcommand{\compos}{\mathbin{\boldsymbol{\cdot}}}
\newcommand{\denote}[1]{\left\llbracket #1 \right\rrbracket}
\newcommand{\eval}[1]{\denote{#1}}
\newcommand{\lift}[1]{\left\lceil #1 \right\rceil}
\newcommand{\clps}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\undef}{\uparrow}
\newcommand{\isdef}{\downarrow}
\newcommand{\projection}[1]{\!\!\downharpoonright_{#1}}
\newcommand{\defeq}{\triangleq}
\newcommand{\eqdef}{\defeq}
\newcommand{\rl}[1]{\textsc{#1}}
\newcommand{\remapsto}[2]{{[#1 \mapsto #2]}}
\DeclareMathOperator{\dom}{dom}
\newcommand{\dontcare}{-}
\newcommand{\anyval}{\_}
\newcommand{\Set}[1]{\left\{ #1 \right\}}
\newcommand{\List}[1]{\left[ #1 \right]}
\newcommand{\powerset}[1]{\mathcal{P}(#1)}
\newcommand{\Trace}{\texttt{Trace}}
\newcommand{\trace}{\ensuremath{\theta}}
\newcommand{\trc}{\trace}
\newcommand{\settrace}{\Theta}
\newcommand{\settrc}{\settrace}
\newcommand{\SimpleTrace}{\texttt{SimpleTrace}}
\newcommand{\simpletrace}{\psi}
\newcommand{\sptrc}{\simpletrace}
\newcommand{\trcto}[1]{\overset{#1}{\to}}
\newcommand{\trcbf}[1]{<_{#1}}
\newcommand{\cpt}{\mathbin{\sharp}}
\newcommand{\bmrg}{\mathbin{\blacktriangleleft}}
\newcommand{\wmrg}{\mathbin{\vartriangleleft}}
\newcommand{\bdown}{\mathbin{\blacktriangledown}}
\newcommand{\sepimp}{-\kern-.6em\raisebox{-.659ex}{*}\ }
\newcommand{\efsep}{\mathbin{\hat *}}
\newcommand{\notimplies}{\mathbin{\centernot\implies}}
\newcommand{\specline}[1]{ { \color{blue} \left\{ \begin{array}{@{}l@{}} #1 \end{array} \right\}} }
\newcommand{\actionline}[2]{ { \color{red} #1 : \left. \begin{array}{@{}l@{}} #2 \end{array} \right.} }
\newenvironment{syntax}[1]{%
    #1 ::= \begin{array}{l}
}{%
    \end{array}
}
\newenvironment{formulea}{%
    \left(
    \begin{array}{@{}l@{}}
}{%
    \end{array}
    \right)
}
\newcommand{\pass}[2]{#1:=#2}
\newcommand{\passign}[2]{#1:=#2}
\newcommand{\pmutate}[2]{[#1]:=#2}
\newcommand{\palloc}[2]{#1 \mathtt{\ :=\ } \mathtt{alloc}(#2)}
\newcommand{\pvar}[1]{\mathtt{#1}}
\newcommand{\pderef}[2]{#1:=[#2]}
\newcommand{\pifs}[1]{\texttt{if} \, (#1)}
\newcommand{\pifm}{\texttt{else}}
\newcommand{\pif}[3]{\pifs{#1} \  #2 \  \pifm \  #3}
\newcommand{\ploop}[2]{\texttt{while} \, (#1) \  #2}
\newcommand{\pskip}{\mathtt{skip}}
\newcommand{\pfuncall}[3]{#1 \mathtt{\ :=\ #2} (#3)}
\newcommand{\pfuncallnr}[2]{\mathtt{#1} (#2)} % funcall no return
\newcommand{\pseq}{\mathbin{;}}
\newcommand{\pchoice}{\mathbin{+}}
\newcommand{\prepeat}{^{*}}
\newcommand{\pwait}[1]{\texttt{wait}(#1)}
\newcommand{\true}{\texttt{true}}
\newcommand{\false}{\texttt{false}}
\newcommand{\boolnot}{\texttt{not}~}
\newcommand{\booland}{\mathbin{\texttt{and}}}
\newcommand{\boolor}{\mathbin{\texttt{or}}}
\newcommand{\pfork}[2]{#1 := \texttt{fork}(#2)}
\newcommand{\pjoin}[1]{\texttt{join}(#1)}
\newcommand{\close}[1]{{#1}^{*}}
\newcommand{\triple}[3]{ \left\{ \begin{array}{@{}l@{}} #1 \end{array} \right\}%
                        \ #2 \ %
                        \left\{ \begin{array}{@{}l@{}} #3 \end{array} \right\}}
\newcommand{\judgement}[5][]{#2 \vdash_{#1} \begin{array}{@{}l} \triple{#3}{#4}{#5} \end{array}}
\newcommand{\repartition}[4]{ \vdash #1 \Rrightarrow^{\{ #3 \}\{ #4 \}} #2 }
\newenvironment{session}{%
    \begin{array}{@{}c@{}}
}{%
    \end{array}
}
\newcommand{\boxass}[3]{%
\fbox{%
    \(%
    \scalebox{.8}{\(#1\)}%
    \)%
}^{\,#2}_{\,#3}%
}
\newcommand{\boxassnp}[2]{%
\fbox{
    \( #1 \)
}^{#2}%
}
\newcommand{\perm}[1]{\left[ \texttt{#1} \right]}
\newcommand{\comment}[1]{\texttt{#1}}
\newcommand{\cell}[2]{#1 \pt #2}
\newcommand{\twocell}[3]{#1 \pt #2, #3}
\newcommand{\threecell}[4]{#1 \pt #2, #3, #4}
\newcommand{\unitelem}[1]{\textbf{0}_{#1}}


% program variable
\newcommand{\vx}{\texttt{x}}
\newcommand{\vvx}{\texttt{vx}}
\newcommand{\vy}{\texttt{y}}
\newcommand{\vvy}{\texttt{vy}}
\newcommand{\vz}{\texttt{z}}
\newcommand{\vtmp}{\texttt{tmp}}

% extra
\newenvironment{rclarray}{%
    \begin{array}{r c l}
}{%
    \end{array}
}
\newenvironment{funcarray}{%
    \left\{%
    \begin{array}{l  r}
}{%
    \end{array}%
    \right.
}

