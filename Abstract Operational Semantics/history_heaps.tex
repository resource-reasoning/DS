%% For double-blind review submission, w/o CCS and ACM Reference (max submission space)
\documentclass[acmsmall,review,anonymous]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For double-blind review submission, w/ CCS and ACM Reference
%\documentclass[acmsmall,review,anonymous]{acmart}\settopmatter{printfolios=true}
%% For single-blind review submission, w/o CCS and ACM Reference (max submission space)
%\documentclass[acmsmall,review]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For single-blind review submission, w/ CCS and ACM Reference
%\documentclass[acmsmall,review]{acmart}\settopmatter{printfolios=true}
%% For final camera-ready submission, w/ required CCS and ACM Reference
%\documentclass[acmsmall]{acmart}\settopmatter{}


%% Journal information
%% Supplied to authors by publisher for camera-ready submission;
%% use defaults for review submission.
\acmJournal{PACMPL}
\acmVolume{1}
\acmNumber{CONF} % CONF = POPL or ICFP or OOPSLA
\acmArticle{1}
\acmYear{2018}
\acmMonth{1}
\acmDOI{} % \acmDOI{10.1145/nnnnnnn.nnnnnnn}
\startPage{1}

%% Copyright information
%% Supplied to authors (based on authors' rights management selection;
%% see authors.acm.org) by publisher for camera-ready submission;
%% use 'none' for review submission.
\setcopyright{none}
%\setcopyright{acmcopyright}
%\setcopyright{acmlicensed}
%\setcopyright{rightsretained}
%\copyrightyear{2018}           %% If different from \acmYear

%% Bibliography style
\bibliographystyle{ACM-Reference-Format}
%% Citation style
%% Note: author/year citations are required for papers published as an
%% issue of PACMPL.
\citestyle{acmauthoryear}   %% For author/year citations


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Note: Authors migrating a paper from PACMPL format to traditional
%% SIGPLAN proceedings format must update the '\documentclass' and
%% topmatter commands above; see 'acmart-sigplanproc-template.tex'.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\PassOptionsToPackage{svgnames}{xcolor}
%\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}

\definecolor{DarkGreen}{rgb}{0, 0.5, 0}


%% Some recommended packages.
\usepackage{booktabs}   %% For formal tables:
                        %% http://ctan.org/pkg/booktabs
\usepackage{subcaption} %% For complex figures with subfigures/subcaptions
                        %% http://ctan.org/pkg/subcaption

%\documentclass[a4paper,UKenglish]{article}%This is a template for producing LIPIcs articles. 

%\input{env.tex}
\usepackage{../hhmacros}
\usepackage{wasysym}
\usepackage{mathrsfs}  
%\usepackage{ stmaryrd }
\usepackage{marvosym}
%\usepackage{hheapdraw}




 
%\usepackage{microtype}%if unwanted, comment out or use option "draft"
%\graphicspath{{./graphics/}}%helpful if your graphic files are in another directory

%\bibliographystyle{plainurl}% the recommended bibstyle

%\usepackage[a4paper]{geometry}
%\usepackage[letterpaper,left=2.4cm,right=2.4cm,top=2.4cm,bottom=2.4cm]{geometry}

\usepackage{opsem}

\usepackage{etex}

%\usepackage{stackengine}

\usepackage{authblk}



%%%%%%%%%%%%%%%%%%%%%% edit mode
\newif\iflong
\longfalse  % uncomment for short version
%\longtrue  % uncomment for long version

\newif\ifdraft
%\draftfalse %uncomment for deleting notes
\drafttrue %uncomment for showing notes

%\newif\ifEditing
%\Editingtrue
%\ifEditing
%    \linenumbers
%\fi

\newif\ifComments
\Commentstrue
\input{comment-box.tex}
%%%%%%%%%%%%%%%%%%%%%% end edit mode

%\newcommand{\tr}[2]{\iflong{}\S#1\else{}\cite[\S{}#2]{ext}\fi}
%\newcommand{\tra}[2]{\iflong{}(\S#1)\else{}\cite[\S{}#2]{ext}\fi}
%
%\newcommand{\nanomalies}{A}
%\newcommand{\ngeneral}{B}
%\newcommand{\nproofs}{C}
%\newcommand{\ncompleteness}{D}
%
%%\renewcommand{\ttdefault}{cmtt}
%%\renewcommand{\sfdefault}{cmss}
%
%\newcommand{\cross}{\ding{56}}


%\renewcommand{\rmdefault}{ptm}      %Space Hacks

\renewcommand{\O}{\mathcal{O}}

%\newcommand{\theproof}{{\noindent\hskip\labelsep
%        \color{darkgray}\sffamily\bfseries \proofname.}}
        
\newcommand{\myparagraph}[1]{\textbf{\color{darkgray}\sffamily#1.}}
\newcommand{\newtext}[1]{{\color{red}{\bf #1}}}
\newcommand{\dfont}[1]{{\bf\em #1}}
% comments


\usepackage{pifont}
\usepackage[frame,all]{xy}
\usepackage{nicefrac}
\usepackage{executions}
\usepackage{execgraphs}

%\usepackage{graphicx}
%\usepackage{wrapfig}
\usepackage{proof}

\DeclareMathAlphabet{\mathpzc}{OT1}{pzc}{m}{it}

%\usepackage{mathtools}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Packages above %%%%%%%%%%%%%%%%%%%%%%%


%\theoremstyle{plain}

%\newcommand{\qed}{$\Box$}
%\newenvironment{proof}{\begin{trivlist}
%\item[\hskip\labelsep{\sc Proof.}]}
%{$\hfill\Box$\end{trivlist}}
%\newenvironment{sketch}{\begin{trivlist}
%\item[\hskip\labelsep{\sc Proof sketch.}]}
%{$\hfill\Box$\end{trivlist}}
%\newenvironment{scheme}{\begin{trivlist}
%\item[\hskip\labelsep{\sc Proof scheme.}]}
%{$\hfill\Box$\end{trivlist}}


%\newcommand{\account}{\ensuremath{\mathsf{acct}}}
%\newcommand{\emptytxt}{{\ensuremath{\mathsf{empty}}}}
%\newcommand{\post}{\ensuremath{\mathsf{post}}}
%\newcommand{\comment}{\ensuremath{\mathsf{comment}}}

%\def\qed{\ifmmode\squareforqed\else{\unskip\nobreak\hfil
%\penalty50\hskip1em\null\nobreak\hfil\squareforqed
%\parfillskip=0pt\finalhyphendemerits=0\endgraf}\fi}


\newcommand{\leaveout}[1]{}

\newcommand\Tstrut{\rule{0pt}{3.5ex}}         % = `top' strut
\newcommand\Bstrut{\\[3pt]}   % = `bottom' strut

%usepackage{paralist}
%\setdefaultleftmargin{10pt}{}{}{}{}{}
%\setlength{\topsep}{3pt}
%\setlength{\itemsep}{2pt}
% \setlength{\partopsep}{0pt}
% \setlength{\parsep}{0pt}
%\setlength{\parskip}{0pt}

%\newenvironment{subitemize}{
%\begin{itemize}
% \setlength{\topsep}{0pt}
%  \setlength{\itemsep}{0pt}
%  \setlength{\parskip}{0pt}
%}{\end{itemize}}
%
%\multlinegap=3pt
%\setlength{\jot}{2pt}
%\newcommand{\ms}{\\[2pt]}

%
%\setlength{\floatsep}{10pt plus 6pt minus 2pt}
%\setlength{\textfloatsep}{10pt plus 6pt minus 3pt}
%\setlength{\intextsep}{10pt plus 6pt minus 3pt}
%\setlength{\dblfloatsep}{18pt plus 4pt minus 2pt}
%\setlength{\dbltextfloatsep}{20pt plus 4pt minus 3pt}

%\newenvironment{mywrapfigure}[3][]{
%  \floatstyle{boxed}
%  \restylefloat{figure}
%  \wrapfigure[#1]{#2}{#3}}
%  {\endwrapfigure
%    \floatstyle{ruled}
%    \restylefloat{figure}
%    }
    

% \setlength{\floatsep}{18pt plus 4pt minus 2pt}
% \setlength{\textfloatsep}{18pt plus 4pt minus 3pt}
% \setlength{\intextsep}{10pt plus 4pt minus 3pt}
% \setlength{\dblfloatsep}{18pt plus 4pt minus 2pt}
% \setlength{\dbltextfloatsep}{20pt plus 4pt minus 3pt}
%
%\makeatletter
%\renewcommand{\section}{\@startsection{section}{1}{0pt}%
%{-3ex plus -1ex minus -.2ex}{1.5ex plus.2ex}%
%{\normalfont\large\bfseries}}
%\renewcommand{\subsection}{\@startsection{subsection}{1}{0pt}%
%{-2ex plus -1ex minus -.2ex}{1ex plus.2ex}%
%{\bfseries}}
%\def \@begintheorem #1#2{%                      {name}{number}
%  \trivlist
%  \item[\hskip \labelsep \textbf{#1 #2.}]%
%  \itshape\selectfont
%  \ignorespaces}
%\newcommand{\nut}{\hspace{.35em}}
%\def \@opargbegintheorem #1#2#3{%               {name}{number}{title}
%  \trivlist
%  \item[%
%    \hskip\labelsep \textsc{#1\ #2}\nut (#3).]%
%  \itshape\selectfont
%  \ignorespaces}
%
%\def\@listI{\leftmargin\leftmargini
%            \parsep 0\p@ \@plus1\p@ \@minus\p@
%            \topsep 6\p@ \@plus2\p@ \@minus0\p@
%            \itemsep 0\p@}
%\let\@listi\@listI
%\@listi
%
%\makeatother
%
%\sloppy

% Author macros:begin %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\iflong
%\title{Specification, Verification and Program Correctness of Transactional Consistency Models using History Heaps}
%%\titlerunning{History Heaps} %optional, in case that the title is too long; the running title should fit into the top page column
%\else
%\title{Specification, Verification and Program Correctness of Transactional Consistency Models using History Heaps}
%\fi
%
%%% Please provide for each author the \author and \affil macro, even when authors have the same affiliation, i.e. for each author there needs to be the  \author and \affil macros
%\iflong
%
%\author[1]{Shale Xiong, Andrea Cerone, Philippa Gardner}
%\author[2]{Azalea Raad}
%\affil[1]{Imperial College London, UK}
%\affil[2]{MPI KaiserSlautern}
%%\authorrunning{A. Cerone} %mandatory. First: Use abbreviated first/middle names. Second (only in severe cases): Use first author plus 'et. al.'
%\else
%
%\author[1]{Shale Xiong}
%\author[1]{Andrea Cerone}
%\author[2]{Azalea Raad}
%\author[1]{Philippa Gardner}
%\affil[1]{Imperial College London, UK}
%\affil[2]{MPI Kaiserslautern}
%\fi

\begin{document}

%% Title information
\title{Weak Consistency in Transactional Systems: a Multi-version Based Operational Approach}         %% [Short Title] is optional;
                                        %% when present, will be used in
                                        %% header instead of Full Title.
%\titlenote{with title note}             %% \titlenote is optional;
                                        %% can be repeated if necessary;
                                        %% contents suppressed with 'anonymous'
%\subtitle{Subtitle}                     %% \subtitle is optional
%\subtitlenote{with subtitle note}       %% \subtitlenote is optional;
                                        %% can be repeated if necessary;
                                        %% contents suppressed with 'anonymous'


%% Author information
%% Contents and number of authors suppressed with 'anonymous'.
%% Each author should be introduced by \author, followed by
%% \authornote (optional), \orcid (optional), \affiliation, and
%% \email.
%% An author may have multiple affiliations and/or emails; repeat the
%% appropriate command.
%% Many elements are not rendered, but should be provided for metadata
%% extraction tools.

%% Author with single affiliation.
\author{Shale Xiong}
%\authornote{with author1 note}          %% \authornote is optional;
                                        %% can be repeated if necessary
%\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
\affiliation{
  \position{Ph.D. Student}
  \department{Department of Computing}              %% \department is recommended
  \institution{Imperial College London}            %% \institution is required
  \streetaddress{Huxley Building}
  \city{London}
  \state{}
  \postcode{SW7 2AZ}
  \country{United Kingdom}                    %% \country is recommended
}
\email{shale.xiong14@imperial.ac.uk}          %% \email is recommended

%% Author with single affiliation.
\author{Andrea Cerone}
%\authornote{with author1 note}          %% \authornote is optional;
                                        %% can be repeated if necessary
%\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
\affiliation{
  \position{Research Associate}
  \department{Department of Computing}              %% \department is recommended
  \institution{Imperial College London}            %% \institution is required
  \streetaddress{Huxley Building}
  \city{London}
  \state{}
  \postcode{SW7 2AZ}
  \country{United Kingdom}                    %% \country is recommended
}
\email{a.cerone@imperial.ac.uk}          %% \email is recommended

%% Author with single affiliation.
\author{Philippa Gardner}
%\authornote{with author1 note}          %% \authornote is optional;
                                        %% can be repeated if necessary
%\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
\affiliation{
  \position{Professor}
  \department{Department of Computing}              %% \department is recommended
  \institution{Imperial College London}            %% \institution is required
  \streetaddress{Huxley Building}
  \city{London}
  \state{-}
  \postcode{SW7 2AZ}
  \country{United Kingdom}                    %% \country is recommended
}
\email{p.gardner@imperial.ac.uk}          %% \email is recommended

\author{Azalea Raad}
%\authornote{with author1 note}          %% \authornote is optional;
                                        %% can be repeated if necessary
%\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
\affiliation{
  \position{Post-doctoral Researcher}
  \department{}              %% \department is recommended
  \institution{Max Planck Institute}            %% \institution is required
  \streetaddress{no idea}
  \city{Kaiserslautern}
  \state{-}
  \postcode{-}
  \country{Germany}                    %% \country is recommended
}
\email{a.raad@mpi-sws.org}          %% \email is recommended

%%%% Author with two affiliations and emails.
%\author{First2 Last2}
%\authornote{with author2 note}          %% \authornote is optional;
%                                        %% can be repeated if necessary
%\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
%\affiliation{
%  \position{Position2a}
%  \department{Department2a}             %% \department is recommended
%  \institution{Institution2a}           %% \institution is required
%  \streetaddress{Street2a Address2a}
%  \city{City2a}
%  \state{State2a}
%  \postcode{Post-Code2a}
%  \country{Country2a}                   %% \country is recommended
%}
%\email{first2.last2@inst2a.com}         %% \email is recommended
%\affiliation{
%  \position{Position2b}
%  \department{Department2b}             %% \department is recommended
%  \institution{Institution2b}           %% \institution is required
%  \streetaddress{Street3b Address2b}
%  \city{City2b}
%  \state{State2b}
%  \postcode{Post-Code2b}
%  \country{Country2b}                   %% \country is recommended
%}
%\email{first2.last2@inst2b.org}         %% \email is recommended


%% Abstract
%% Note: \begin{abstract}...\end{abstract} environment must come
%% before \maketitle command
\begin{abstract}
Contents of this set of notes: 
History heaps. Semantics of Programs 
running under weak consistency models using history heaps as states. 
Simulation technique for comparing weak consistency models defined using 
history heaps. Verification of implementations.
\textbf{Points following Dagstuhl: Viktor seemed positive about the 
history heap work. His question was whether the framework is generic 
enough to capture the protocols that they are developing with Azalea. 
Alexey's opinion is that the framework may have some use if we 
manage to prove implementations of protocols correct. 
I would also like to have Azalea's opinion on a semantics based 
on history heaps.}
\end{abstract}


%% 2012 ACM Computing Classification System (CSS) concepts
%% Generate at 'http://dl.acm.org/ccs/ccs.cfm'.
\begin{CCSXML}
<ccs2012>
<concept>
<concept_id>10011007.10011006.10011008</concept_id>
<concept_desc>Software and its engineering~General programming languages</concept_desc>
<concept_significance>500</concept_significance>
</concept>
<concept>
<concept_id>10003456.10003457.10003521.10003525</concept_id>
<concept_desc>Social and professional topics~History of programming languages</concept_desc>
<concept_significance>300</concept_significance>
</concept>
</ccs2012>
\end{CCSXML}

\ccsdesc[500]{Software and its engineering~General programming languages}
\ccsdesc[300]{Social and professional topics~History of programming languages}
%% End of generated code


%% Keywords
%% comma separated list
\keywords{keyword1, keyword2, keyword3}  %% \keywords are mandatory in final camera-ready submission


%% \maketitle
%% Note: \maketitle command must come after title commands, author
%% commands, abstract environment, Computing Classification System
%% environment and commands, and keywords command.
\maketitle

\newcommand{\RootPath}{..}
\input{\RootPath/intro.tex}

\input{\RootPath/semantics.tex}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% the small intro for semantics is in semantics.tex
% section 2.1  in semantics/database-view.tex
% section 2.2.1 programming lang. in semantics/tarns.tex
% section 2.2.2 transactional semantics in semantics/tarns.tex
% section 2.2.3 prog semantics in semantics/prog.tex
% section 2.2.4 example  in semantics/example.tex
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% This is your ordinal version. 
%
\ac{ORDINAL VERNON starts from here.}
\input{andrea.tex}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Examples of Consistency Models}
\input{cmexamples}
%
%
%\subsection{Encoding Dependency Graphs' Specifications}
%\ac{Contents: Isomorphism between history heaps and dependency graphs, 
%converting dependency graphs specifications, well-formedness of dependency graphs' specifications.}

\section{Relationship to Abstract Executions}
\input{hheap2absexec}

\subsection{Completeness of the Semantics} 
\ac{Contents: Abstract execution Semantics and the anarchic model. 
Encoding of abstract executions into history heaps. Also, 
traces in the history heaps semantics can be used to recover 
an abstract execution $\aexec$. Hence it is possible to convert history heaps 
specifications into sets of abstract executions.
I think this should be the Theorem: for every possible trace of a program $\prog$ that is allowed by the anarchic 
model, and that results into an abstract execution $\chi$ that is allowed by $CM$, there 
exists a trace of the same program under the history heaps $CM$-semantics, 
and whose encoding into an abstract execution is exactly $\aexec$.}
\subsection{Remarks on the operational semantics}
\ac{There was a discussion on whether views of threads should always be consistent w.r.t a 
consistency model specification, or whether they should be consistent only w.r.t. to 
a consistency model specification only prior to executing a transaction.\\ 
In this section I should argue that the first option leads to losing the completeness of the 
semantics.}


%\section{Testing Consistency Models Specifications}
%\ac{Definition of may-testing preorder, which is standard and at some point 
%was also in the notes - where did it go? Most General Client Semantics of consistency 
%models under history heaps. Conjecture: two consistency models are equivalent if they 
%produce the same set of histories (transactions labelled with the session order) under 
%the most general client semantics. This is consistent with Hongseok's result that contextual 
%refinement for concurrent libraries coincide with 
%the sequential consistency preorder, when threads can only communicate via the memory regions 
%shared withing the library.}

%\subsection{Applications}
%\ac{Proof of equivalence of consistency models specifications given in terms of history heaps, 
%with respect to the same specifications given in terms of dependnecy graphs. In this section 
%I must be careful to address the work by Crook and Alvisi, as they also have an operational model 
%of transactions (without a programming language) and a proof of equivalence with respect to 
%dependency graphs' specifications.}

%\subsection{Verification of Algorithms} 
%Candidates: 
%\begin{itemize}
%\item Walter (\textbf{https://dl.acm.org/citation.cfm?id=2043592}) - PSI, should be easy, 
%people may find it boring, the Concur'15 model was inspired by Walter and people may argue we 
%already proved its correctness in there.
%\item Wren (\textbf{https://infoscience.epfl.ch/record/254970}) - Causal Consistency - very recent and seems to have 
%a nice pseudo-code.\\
%\item COPS-gt (\textbf{https://www.cs.cmu.edu/~dga/papers/cops-sosp2011.pdf}) - Causal Consistency -  mentioned a lot at 
%talks, may be a viable option.
%\item Distributed SI (\textbf{https://dl.acm.org/citation.cfm?id=2691546}) - Snapshot Isolation - 5 different protocols given in the paper, 
%not sure if any of those is easily verifiable.\\ 
%\item Clock-SI (\textbf{https://dl.acm.org/citation.cfm?id=2553434}) - Using physical clocks as time-stamps, may have a direct encoding 
%into history heaps - has some chances of being verifiable.
%\end{itemize}

\bibliographystyle{abbrv}
\bibliography{bibliography2}

\end{document}

