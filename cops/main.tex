In \cref{sec:overall-cops}, we have explained the COPS protocol 
that retracts transactions to be single-write and multiple-read%
\footnote{A simplified COPS protocol only allows single-write and single-read transactions}
and implements a replicated database that satisfies causal consistency.
In this section, we give a formal model and semantics for COPS protocol
and verify the COPS protocol via trace refinement with respect to our operational semantics.

\paragraph{Notation.}
In this section, all the variables related to COPS protocol are annotated with \emph{hat}, 
for example \( \copstxid \).
We pick the same letters for the concepts that have similar meaning to our operational model.

\subsection{Reference Machine States} \label{sec:cops-model} \input{cops/model} 
\subsection{Reference Operational Semantics} \label{sec:cops-semantics} \input{cops/semantics} 
\subsection{Normal Traces and Extended Traces} \label{sec:cops-normal-trace} \input{cops/normal-trace} 
\label{sec:cops-extended-trace} \input{cops/extended-trace} 
\subsection{Trace Refinement} \label{sec:cops-encode} \input{cops/encode} 
