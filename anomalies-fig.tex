\begin{figure*}[t]
\captionsetup[subfigure]{aboveskip=-5pt, belowskip=5pt}
\begin{tabular}{@{} c | c | c @{}}
\hline
\phantom{-}& \phantom{-}& \phantom{-}\\
\begin{subfigure}{0.2\textwidth}
\begin{centertikz}

%Location x
\node(locx) {$\key_1 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locx.east) {vlist={versionx}{%
    /$\val_0$/$\txid_0$/$\Set{\txid_\cl^2}$
    , /$\val_1$/$\txid_1$/$\Set{\txid_\cl^1}$
}};

\end{centertikz}\vspace{5pt}%
\caption{Disallowed by \(\MRd\)}
\label{fig:mr-disallowed}
\end{subfigure}
%\quad
&
\begin{subfigure}{0.36\textwidth}
\begin{centertikz}

%Location x

\node(locx) {$\key_1 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locx.east) {vlist={versionx}{%
    /$\val_0$/$\txid_0$/$\Set{\txid'}$
    , /$\val_1$/$\txid_{\cl}^1$/$\emptyset$
}};

%Location y
\path (versionx.east) + (1,0) node (locy) {$\key_2 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locy.east) {vlist={versiony}{%
    /$\val_0$/$\txid_0$/$\emptyset$
    , /$\val_2$/$\txid_\cl^2$/$\Set{\txid'}$
}};

\end{centertikz}\vspace{5pt}
\caption{Disallowed by \(\MW\)}
\label{fig:mw-disallowed}
\end{subfigure}
%\quad
&
\begin{subfigure}{0.39\textwidth}
\begin{centertikz}

%Location x
\node(locx) {$\key_1 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locx.east) {vlist={versionx}{%
    /$\val_0$/$\txid_0$/$\Set{\txid}$
    , /$\val_1$/$\txid'$/$\Set{\txid_\cl^1}$
}};

%Location y
\path (versionx.east) + (1,0) node (locy) {$\key_2 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locy.east) {vlist={versiony}{%
    /$\val_0$/$\txid_0$/$\emptyset$
    , /$\val_2$/$\txid_\cl^2$/$\Set{\txid}$
}};

\end{centertikz}

\vspace{5pt}
\caption{Disallowed by \(\WFR\)}
\label{fig:wfr-disallowed}
\end{subfigure}\\
\hline
\end{tabular}
%
%
%
%
\begin{tabular}{@{} c | c | c @{}}
\phantom{-}& \phantom{-}& \phantom{-}\\
\begin{subfigure}{0.25\textwidth}
\begin{centertikz}%

%Location x
\node(locx) {$\key_1 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locx.east) {vlist={versionx}{%
    /$0$/$\txid_0$/$\Set{\txid_\cl^1,\txid_\cl^2}$
    , /$1$/$\txid_\cl^1$/$\emptyset$
    , /$1$/$\txid_\cl^2$/$\emptyset$
}};

\end{centertikz}%
\vspace{5pt}
\caption{Disallowed by \(\RYW\)}
\label{fig:ryw-disallowed}
\end{subfigure}
& 

\begin{subfigure}{0.40\textwidth}
\begin{centertikz}%

%Location x
\node(locx) {$\key_1 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locx.east) {vlist={versionx}{%
    /$\val_0$/$\txid_0$/$\Set{\txid_2}$
    , /$\val_1$/$\txid_1$/$\emptyset$
}};

%Location y
\path (versionx.east) + (1,0) node (locy) {$\key_2 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locy.east) {vlist={versiony}{%
    /$\val_0$/$\txid_0$/$\Set{\txid_1}$
    , /$\val_2$/$\txid_2$/$\emptyset$
}};

\end{centertikz}%
\vspace{5pt}
\caption{Write skew, disallowed by \(\SER\)}
\label{fig:ser-disallowed}
\end{subfigure}%
&
\begin{subfigure}{0.30\textwidth}
\begin{centertikz}

\node(locx) {$\key_1 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locx.east) {vlist={versionx}{%
    /$0$/$\txid_0$/$\Set{\txid,\txid'}$
    , /$1$/$\txid$/$\emptyset$
    , /$1$/$\txid'$/$\emptyset$
}};

\end{centertikz}
\vspace{5pt}
\caption{Lost update, disallowed by \(\UA\)}
\end{subfigure}
\\
\hline
\end{tabular}
%
%
%
%
\phantom{x}\vspace{7pt}
\begin{tabular}{@{} c | c @{}}
\phantom{-}& \phantom{-} \\
\begin{subfigure}{0.42\textwidth}
\begin{centertikz}%
%Location x
\node(locx) {$\key_1 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locx.east) {vlist={versionx}{%
    /$\val_0$/$\txid_0$/$\Set{\txid_{\cl_2}^1}$
    , /$\val_1$/$\txid$/$\Set{\txid_{\cl_1}^1}$
}};

%Location y
\path (versionx.east) + (1,0) node (locy) {$\key_2 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locy.east) {vlist={versiony}{%
    /$\val_0$/$\txid_0$/$\Set{\txid_{\cl_1}^2}$
    , /$\val_1$/$\txid$/$\Set{\txid_{\cl_2}^2}$
}};

\end{centertikz}%
\vspace{5pt}
\caption{Long fork, disallowed by \(\CP\)}
\label{fig:cp-disallowed-2}
\label{fig:cp-disallowed}
\end{subfigure}
&
\begin{subfigure}{0.542\textwidth}%
\begin{centertikz}%
%Location x
\node(locx) {$\key_1 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locx.east) {vlist={versionx}{%
    /$\val_0$/$\txid_0$/$\Set{\txid_4}$
    , /$\val_1$/$\txid_1$/$\emptyset$
    , /$\val_2$/$\txid_2$/$\emptyset$
}};

%Location y
\path (versionx.east) + (1,0) node (locy) {$\key_2 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locy.east) {vlist={versiony}{%
    /$\val_0$/$\txid_0$/$\Set{\txid_2}$
    , /$\val_3$/$\txid_3$/$\Set{\txid_4}$
    , /$\val_4$/$\txid_4$/$\emptyset$
}};

\end{centertikz}
\vspace{5pt}
\caption{Allowed by \( \UA \) and \( \CP \) but disallowed by \(\SI\)}%
\label{fig:si-disallowed}%
\end{subfigure} \\
\hline
\end{tabular}
\hrulefill
\caption{Behaviours disallowed under different consistency models}
\label{fig:anomalies}
\end{figure*}
