\chapter{The mCAP Program Logic}

\label{sec:mcapModel}

The path to the definition of a program logic for serializable transactions starts in this section, where we lay its foundations by taking elements from existing logics for concurrency, and expand it to a general framework that can be instantiated for one's needs. As a consequence, we provide the first formalisation of the mCAP logic model (where the \textit{m} stands for \textit{modern}) and later of its semantics. This work builds upon the CAP program logic, presented in Section \ref{sec:cap} and first introduced in \cite{cap}, and borrows some of the definitions and proof strategies from CoLoSL \cite{colosl} \cite{azaleaThesis}. The main novelties introduced in mCAP, as compared to regular CAP, are concerned with freeing its usage as a logic from some hard constraints and create the necessary space for transactional reasoning. mCAP is in fact parametric with respect to the region capabilities (or \textit{guards}) used, it allows multiple region updates at once through the repartitioning operation, and does not enforce the entirety of a region capability to be held in order to construct the region itself.

The program logic that we later provide in Section \ref{sec:transLogic} will be a concrete instantiation of mCAP and will enable us to reason about systems adopting real transactional atomicity and later about ones using \tpl\ to handle their concurrency control.

\input{./david/moderncap/sepalgebra.tex}

\input{./david/moderncap/worlds.tex}

\input{./david/moderncap/assertions.tex}