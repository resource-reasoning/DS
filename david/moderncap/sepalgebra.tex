\subsection{Partial Commutative Monoid}

\label{sec:pcm}

The concept of a partial commutative monoid was introduced in \cite{sepalgebra} to abstract from the standard separation logic model for heaps equipped with an operator to compose them. We introduce such concept here and list some of its core properties that will be later used.

\begin{defn}
	(Partial commutative monoid).
	A \emph{partial commutative monoid} with multiple units \cite{views} is a triple $(\mathcal{M}, \bullet, I)$ where $\mathcal{M}$ is a set equipped with a partial operator $\bullet : \mathcal{M} \times \mathcal{M} \rightharpoonup \mathcal{M}$ and a unit set $I \subseteq \mathcal{M}$ satisfying:
	\begin{itemize}
		\item Commutativity: $m_1 \bullet m_2 = m_2 \bullet m_1$ when either is defined.
		\item Associativity: $m_1 \bullet (m_2 \bullet m_3) = (m_1 \bullet m_2) \bullet m_3$ when either is defined.
		\item Existence of unit: for all $m \in \mathcal{M}$ there exists $i \in I$ such that $i \bullet m = m$.
		\item Minimality of unit: for all $m \in \mathcal{M}$ and $i \in I$, if $i \bullet m$ is defined then $i \bullet m = m$.
	\end{itemize}
\end{defn}
When referring to a partial commutative monoid we often write \emph{pcm} as an abbreviation. \\

There is often the need to compare elements of a partial commutative monoid. For this reason, we introduce the ordering relation between pairs of such elements, which is defined when there is a some element that composed with the first one results in the second one.
\begin{defn}
	(Ordering)
	Given a pcm $(\mathcal{M}, \bullet, \mathbf{0})$, the \emph{ordering} relation $\leq\ : \mathcal{M} \times \mathcal{M}$ is defined as:
\[
	\leq\ \triangleq \{ (m_1, m_2)\ |\ \exists m \ldotp m_1 \bullet m = m_2 \}
\]
\end{defn}
We write $m_1 \leq m_2$ for $(m_1, m_2) \in\ \leq$. Next, we introduce a relation between elements of a pcm that allows to retrieve all of the compatible element-pairs. This means that if $m_1$ and $m_2$ are compatible, then their composition is defined.

\begin{defn}
	(Compatibility).
	Given a pcm $(\mathcal{M}, \bullet, \mathbf{0})$, the \emph{compatibility} relation $\sharp : \mathcal{M} \times \mathcal{M}$ is defined as:
\[
	\sharp \triangleq \{ (m_1, m_2)\ |\ \exists m \ldotp m_1 \bullet m_2 = m \}
\]
\end{defn}