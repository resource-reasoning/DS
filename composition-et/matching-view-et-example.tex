\subsection{\( \ET \)s matching views}
\label{sec:et-match-view}

To recall, 
two execution tests $\ET_1$ and $\ET_2$ have matching views if for any \(\mkvs, \mkvs',\fp,\vi_1,\vi_2,\vi_1',\vi_2'\):
\begin{centermultline}
    \ET_1 \vdash (\mkvs,\vi_1) \csat \fp : (\mkvs', \vi_1' ) \land
    \ET_2 \vdash (\mkvs,\vi_2) \csat \fp : (\mkvs', \vi_2' )  \\
    {} \land \begin{bracketarray}\fora{l, \key, \val} (l, \key, \val) \in \fp \implies \max(\vi_1(\key)) = \max(\vi_2(\key))\end{bracketarray} \\
    {} \implies
    \exsts{\vi, \vi'}
    \ET_1 \vdash (\mkvs,\vi) \csat \fp : (\mkvs', \vi' ) \land
    \ET_2 \vdash (\mkvs,\vi) \csat \fp : (\mkvs', \vi' )  \\
    {} \land \fora{\key} \vi_1(\key) \cup \vi_2(\key) \subseteq \vi(\key) \land \vi'(\key) = \vi'_1(\key) \cup \vi'_2(\key)
\end{centermultline}

\Cref{tab:et-def-minimum-footprint} presents execution tests that are adapted to satisfy the minimum footprint.
\begin{table}[h!]
    \centering
    \caption{\(\ET\) definitions that satisfy minimum footprint}
    \label{tab:et-def-minimum-footprint}
\begin{tabularx}{0.7\textwidth}{ @{} X r  @{} }
\hline
Model & Execution Test: \((\mkvs, \vi) \csat \fp : (\mkvs',\vi')\)
\\
\hline
\MR & $ \vi \viewleq \vi'$
\\
\MW & 
\(\allowed[\mkvs, \vi, \fp, \SO\rflx] \)
\\
\RYW & $ \txid \in \mkvs' \land \txid \notin \mkvs \land \wtOf(
\mkvs'(\key, i) ) \toEDGE{\SO\rflx} \txid \implies i \in \vi'(\key) $
\\
\WFR & 
\( \allowed[\mkvs, \vi, \fp, \WR_{\mkvs} ; \SO\rflx] \)
\\
\hline
\end{tabularx}%
\end{table}
The (overloaded) \( \allowed{\mkvs,\vi,\fp,R}\) is defined as the following:
\begin{align*}
    \allowed[\mkvs, \vi, \fp, R] & \defeq  
    \exsts{\txidset} \Tx[\mkvs,\vi] \subseteq \txidset 
    \land \begin{bracketarray} 
        \fora{ \txid \in \txidset, \txid' \in \mkvs } 
        \exsts{l,\key,\val,i,j} 
        (l,\key,\val) \in \fp \\
        {} \land \txid = \wtOf[\mkvs(\key,i)]
        \land \txid' = \wtOf[\mkvs(\key,j)] \\
        {} \land \txid' \toEDGE{R^*} \txid \implies \txid' \in \txidset 
    \end{bracketarray} 
    \land \vi = \getView[\mkvs, \txidset]  \\
    \allowed[\mkvs, \vi, \fp, R] & \defeq 
    \vi = \getView[\mkvs, \func{lfpTx}[\mkvs,\vi,\fp]] \\
    \func{lfpTx}[\mkvs,\vi,\fp] 
    & \defeq 
    \mu X . 
    \begin{bracketarray}
        \left( \Tx[\mkvs,\vi] \cap \Set{\wtOf[\mkvs(\key,i)]}[\exsts{l,\val} (l,\key,\val) \in \fp ] \right) \subseteq X  \\
        \land \begin{bracketarray} \fora{ \txid \in X, \txid' \in \mkvs} \txid' \toEDGE{R} \txid \implies \txid' \in X \end{bracketarray} 
    \end{bracketarray} 
\end{align*}
From this point we only discuss execution tests that satisfy minimum footprint.

\begin{lemma}
\( \MR \) and \( \MW \) have matching views.
\end{lemma}
\begin{proof}
Assume kv-stores \( \mkvs, \mkvs' \), a fingerprints \( \fp \) and views \( \vi_1, \vi'_1, \vi_2, \vi'_2 \):
\begin{centermultline}
    \ET_1 \vdash (\mkvs,\vi_1) \csat \fp : (\mkvs', \vi_1' ) \land
    \ET_2 \vdash (\mkvs,\vi_2) \csat \fp : (\mkvs', \vi_2' )
    \land \begin{bracketarray}\fora{l, \key, \val} (l, \key, \val) \in \fp \implies \max(\vi_1(\key)) = \max(\vi_2(\key))\end{bracketarray} 
\end{centermultline}
We pick \(\vi, \vi' \) such that:
\begin{centermultline}
    \fora{\key} 
    \begin{bracketarray}\exsts{l,\val} (l,\key,\val) \in \fp \implies \vi_1(\key) \cup \vi_2(\key) = \vi(\key)\end{bracketarray} \\
    {} \land \begin{bracketarray}
        \nexists l,\val \ldotp \; (l,\key,\val) \in \fp 
        \implies \vi_1(\key) \cup \vi_2(\key) \cup \vi'_1(\key) \cup \vi'_2(\key) = \vi(\key)
\end{bracketarray}
    \land \vi'(\key) = \vi'_1(\key) \cup \vi'_2(\key)
\end{centermultline}
Given \( \vi_1 \viewleq \vi'_1 \) It is easy to see that \( \vi \viewleq \vi' \) and then \( \ET_\MR \vdash (\mkvs,\vi) \csat \fp : (\mkvs',\vi') \).
Given that \( \fora{\key} \exsts{l,\val}  (l,\key,\val) \in \fp \implies \vi_1(\key) \cup \vi_2(\key) = \vi(\key) \), it means \( \allowed[\mkvs,\vi,\fp,\SO\rflx]\),
and thus \( \ET_\MW \vdash (\mkvs,\vi) \csat \fp : (\mkvs',\vi') \).
\end{proof}
