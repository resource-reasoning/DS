\begin{figure}

\begin{tabularx}{\textwidth}{@{} c | c @{} }
\hline
\phantom{-}& \phantom{-}\\[-5pt]
\begin{subfigure}{0.39\textwidth}
\centering
\scalebox{.8}{%
\begin{tikzpicture}%
\KVMapping{x}{\key_1}{
    /0/\txidinit/\emptyset
};
\KVMapping[x]{y}{\key_2}{
    /0/\txidinit/\emptyset
};
\end{tikzpicture}%
}
\caption{Initial kv-store}
\label{fig:overview-sec-long-fork-init}
\end{subfigure}
& \begin{subfigure}{0.58\textwidth}
\centering
\scalebox{.8}{%
\begin{tikzpicture}%
\KVMapping{x}{\key_1}{
    /0/\txidinit/\Set{\txid,\txid_3}
    , /1/\txid/\Set{\txid_2}
};
\KVMapping[x]{y}{\key_2}{
    /0/\txidinit/\Set{\txid',\txid_2}
    , /1/\txid'/\Set{\txid_3}
};
\end{tikzpicture}%
}
\caption{Transactions \( \txid_2 \) and \( \txid_3\)
            observe the update to \( \key_1 \) and \( \key_2 \) 
            in different order (\emph{long fork} anomaly)}
\label{fig:overview-sec-long-fork}
\end{subfigure}
\\
\hline
\end{tabularx} 

\begin{subfigure}{\textwidth}
\centering
\begin{tikzpicture}

\node at (0,0) (a) {\(\txidinit\)};
\node at (2,-0.5) (b) {\(\txid\)};
\node at (4.5,0) (c) {\(\txid_3\)};

\coordinate (a1) at ($(a) + (3,0)$);
\coordinate (b1) at ($(b) + (7,0)$);
\coordinate (c1) at ($(c) + (3,0)$);

\draw[|-,densely dashed] (a) -- ($(a)!0.5!(a1)$);
\draw[-|] ($(a)!0.5!(a1)$) -- (a1);
\draw[|-,densely dashed] (b) -- ($(b)!0.5!(b1)$);
\draw[-|] ($(b)!0.5!(b1)$) -- (b1);
\draw[|-] (c) -- ($(c)!0.5!(c1)$);
\draw[-|,densely dashed] ($(c)!0.5!(c1)$) -- (c1);

\end{tikzpicture}

\caption{An example of dependencies between transactions with respect to 
the time line of the starts and commits of these transactions 
(dashed line being able to stretched)}
\label{fig:overview-dependencies-time-line}

\end{subfigure}

\hrulefill


\caption{Long fork anomaly: multiple counters}
\label{fig:mult-counter}
\end{figure}
