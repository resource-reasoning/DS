\section{Litmus Tests}
This is used to test the semantics.
\[
    \begin{session}
        \begin{array}{@{}c || c || c || c@{}}
            \begin{transaction}
                \pderef{\vx}{\loc_x}; \\
                \pifs{\vx=0} \\
                \quad \pmutate{\loc_y}{1}
            \end{transaction} & 
            \begin{transaction}
                \pderef{\vy}{\loc_y}; \\
                \pifs{\vx=0} \\
                \quad \pmutate{\loc_x}{1}
            \end{transaction} & 
            \begin{transaction}
                \pmutate{\loc_x}{2}
            \end{transaction} & 
            \begin{transaction}
                \pmutate{\loc_y}{2}
            \end{transaction} \\
        \end{array}
    \end{session}
\]

Simple merging example.
\[
    \begin{session}
        \begin{array}{@{}c || c @{}}
            \begin{transaction}
                \pderef{\vx}{\loc_x}; \\
                \pifs{\vx=0} \\
                \quad \pmutate{\loc_y}{1}
            \end{transaction} & 
            \begin{transaction}
                \pderef{\vy}{\loc_y}; \\
                \pifs{\vx=0} \\
                \quad \pmutate{\loc_x}{1}
            \end{transaction} 
        \end{array}
    \end{session}
\]

Long fork.
\[
    \begin{session}
        \begin{array}{@{}c || c @{}}
            \begin{session}
                \begin{transaction}
                    \pmutate{\loc_{x}}{1};
                \end{transaction} \\
                \begin{transaction}
                    \pderef{\vx}{\loc_x}; \\
                    \pderef{\vy}{\loc_y}; \\
                    \pifs{\vx=1 \booland \vy = 0} \\
                    \quad \pmutate{\loc_w}{1}
                \end{transaction} 
            \end{session}  &
            \begin{session}
                \begin{transaction}
                    \pmutate{\loc_{y}}{1};
                \end{transaction} \\
                \begin{transaction}
                    \pderef{\vx}{\loc_x}; \\
                    \pderef{\vy}{\loc_y}; \\
                    \pifs{\vx=0 \booland \vy = 1} \\
                    \quad \pmutate{\loc_z}{1}
                \end{transaction} 
            \end{session}
        \end{array}
    \end{session}
\]

Test the rely is ``closed"" correctly, esp.\ location x and y transfer from (0,0) to (2,1).
\[
    \begin{session}
        \begin{array}{@{}c || c || c || c@{}}
            \begin{transaction}
                \pmutate{\loc_x}{1}
            \end{transaction} & 
            \begin{transaction}
                \pifs{\vx=0} \\
                \quad \pmutate{\loc_y}{1}
            \end{transaction} & 
            \begin{transaction}
                \pderef{\vx}{\loc_x}; \\
                \pderef{\vy}{\loc_y}; \\
                \pifs{\vx=1 \booland \vy = 0} \\
                \quad \pmutate{\loc_x}{2}
            \end{transaction} & 
            \begin{transaction}
                anything
            \end{transaction} \\
        \end{array}
    \end{session}
\]
