\subsection{Triple Semantics}

\begin{defn}[Triple semantics]
\label{def:semantic-triple}
\label{def:triple-semantic}
\label{def:semantic-steps}
%The collapse of update rely, written \( \clpsR{\relyU} \), is defined with respect to pointwise collapsing each elements of pairs and the second abstract executions in a pair must be reachable from the first one.
%\[
%\begin{rclarray}
    %\clpsR{\relyU} & \defeq & 
    %\Setcon{
        %(\aexec, \aexec')
    %}{
        %\exsts{\w, \w', \evset}  
        %\aexec \in \clpsW{\w}
        %\land \aexec' \in \clpsW{\w'}
        %\land ( \w, \w' ) \in \relyU
        %\land (\aexec, \evset, \aexec') \in \func{transinv}{\w}
    %}
%\end{rclarray}
%\]
%Therefore the collapse of rely is \( (\aexec,\aexec') \in \clpsR{\Rely} \iffdef ( \aexec, \aexec' ) \in \closure{(\clpsR{\relyU})} \).
%The collapse of guarantee, \( \clpsG{\Guar}\), is defined in a similar way.
The \( \predn{step} \) predicate is defined as the follows,
\[
\begin{rclarray}
    \pred{step}{0,\w, \w', \prog} & \defeq & \True \\
    \pred{step}{\nat,\w, \w', \prog} & \defeq & (\w,\w'') \in \Rely \land \pred{step}{\nat - 1,\w'', \w', \prog} \\
    \pred{step}{\nat,\w, \w', \prog} & \defeq &
    \begin{array}[t]{@{}l}
        \for{\aexecrun, \aexecrun'', \thstk, \thstk'', \lb, \thid}
        \eraseAEX{\aexecrun} \in \clpsW{\w}
        \land \func{como}{\w}, \thid \vdash (\aexecrun, \thstk), \prog \toT{\lb} (\aexecrun'', \thstk''), \prog' \\
        \implies \exsts{\w''}
        \eraseAEX{\aexecrun''} \in \clpsW{\w''} 
        \land (\w, \w'') \in \Guar
        \land \pred{step}{\nat - 1, \w'', \w', \prog'} \\
    \end{array}
\end{rclarray}
\]
Given above the semantics of the triple is as the follows,                                                  
\[
\begin{rclarray}
    \tripleSemG{\gpre}{\prog}{\gpost} & \defeq &
    \begin{array}[t]{@{}l@{}}
        \for{ \w,\w', \stk, \lenv, \nat }  
        \w \in \evalW{\gpre} 
        \land \w' \in \evalW{\gpost} 
        \land \pred{step}{\nat, \w, \w', \prog}
    \end{array}
\end{rclarray}
\]
\end{defn}                                         
