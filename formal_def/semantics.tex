\section{Semantics\label{sec:semantics}}

\sx{Terms we use ?? Thread vs Session. The small intro steal from Andrea :)}
We focus on an abstract computational model for database where multi-threaded programs can access and update locations in a centralised heap through atomic transactions. 
Transactions in our model execute atomically, though they have different effect on database depending on the consistency model that does not necessarily correspond to \emph{serialisability}. 
This means that, at the moment of executing, a transaction may not observe the most up-to-date value of a location. 
To overcome this issue, we model the state of the database using \emph{history heaps}. 
A history heap keeps track of all the versions written for any location, as well as the information about the transactions that read and wrote such versions. 
To model the potential out-of-date observation, we use \emph{views}.
A view decides the observable versions of locations for a thread.
When executing, a transaction extracts a local state from the history heap and the view, and afterwards the transaction commits a set of operations that might change the history heap and the view, if the change is allowed by the consistency model.

We starts with the syntax of programs followed by the semantics of transaction.
Then we will formally define history heaps and views, and how we specify consistency models.
Finally, we will give the semantics for the entire programs.


\input{./formal_def/semantics/trans.tex}
%\input{./formal_def/semantics/graph.tex}
\input{./formal_def/semantics/history.tex}
