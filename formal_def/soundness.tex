\section{Soundness}

\begin{defn}[Transaction interpretation]
\label{def:transactions-interpretation}
Given the set of transaction \( \trans \in \Transactions \) (\defin \ref{def:language}) and the operational semantics (\fig \ref{fig:transaction_semantics}), the \emph{transaction interpretation} function \( \intpSQ{.} : \Transactions \to \FPHeaps \to \powerset{\FPHeaps} \) is defined as follows:
\[
    \begin{rclarray}
        \intpSQ{\trans}(\fph) & \defeq & 
            \Setcon{%
                \fph'
            }{%
                \exsts{ \stk, \stk' } (\stk, \fph ), \trans \toL^{*}  (\stk', \fph' ), \pskip
            }\\
    \end{rclarray}
\]
\end{defn}

\begin{defn}[Atomic interpretation]
Given the set of transactions \( \trans \in \Transactions \) (\defin \ref{def:language}), the set of programs \( \Programs \) and the operational semantics (\fig \ref{fig:thread_semantics}), the \emph{atomic interpretation} function \( \intfATOM{.} : \Atom \to \TSHeaps \to \powerset{\TSHeaps} \) is defined as follows, where \( \Atom \defeq \Setcon{\ptrans{\trans}}{\trans \in \Transactions \land \ptrans{\trans} \in \Programs} \).
\[
    \begin{rclarray}
        \intpSQ{\ptrans{\trans}}(\tsh) & \defeq & 
            \Setcon{%
                \tsh'
            }{%
                \exsts{ \stk, \stk', \ts, \ts' } (\stk, \tsh, \ts ), \ptrans{\trans} \toG{\stub}  (\stk', \tsh', \ts' ), \pskip
            }\\
    \end{rclarray}
\]
\end{defn}

\begin{defn}[Heap to time-stamp heaps]
\label{def:h2tsh}
Given the set of (plain) heap \( \h \in \PHeap \) and the set of \( \tsh \TSHeaps \), the function \( \funcn{h2tsh} : \PHeap \to \powerset{\TSHeaps} \) is defined as follows:
\[
    \begin{rclarray}
        \func{h2tsh}{\h} & \defeq & 
        \Setcon{%
            \lambda \addr \ldotp \val 
        }{%
            \exsts{ \ts } \snapshot{\tsh}{\ts}(\addr) = (\val, \stub)
        }
    \end{rclarray}
\]
where the \( \snapshotName \) function (\fig \ref{fig:thread_semantics}) returns a fingerprint heap corresponding the state at time \( \ts \), and here we extract the first projection.
\end{defn}

\begin{defn}[Reification function]
\label{def:reification}
Given the set of assertions \( \gpre \in \Ast \) and time-stamp heap \( \TSHeaps \), the \emph{reification} function \( \reif{.} : \Ast \to \powerset{\TSHeaps} \) is defined as follows:
\[
\begin{rclarray}
    \reif{\gpre} & \defeq & 
    \Setcon{%
        \tsh
    }{%
        \exsts{\lenv, \stk, \h} \world \in \evalW{\gpre} 
        \land (\h, \stub ) \in \flattenW{\world}
        \land \tsh \in\func{h2tsh}{\h} 
    }
\end{rclarray}
\]
where the interpretation of assertion \( \evalW{.} \) is defined in \defin \ref{def:assertion}, the world flattening \( \flattenW{.} \) in \defin \ref{def:world} and \( \funcn{\h2tsh} \) function in \defin \ref{def:h2tsh}.
\end{defn}

