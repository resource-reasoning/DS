%\ifCommentEdits
%\begin{figure*}[!t]
%\small
%\begin{tabularx}{\textwidth}{ @{} X r r ||  X  r r @{} }
%\hline
%Model & Initial \( \txidset \) & Relation \( R \) &
%Model & Initial \( \txidset \) & Relation \( R \)
%\\
%\hline
%\MR & \(\clRead[\mkvs,\cl]\) & \( \emptyset \)
%&
%\UA &   \( \uaWrite[\mkvs,\fp] \) & \( \bigcup_{(\otW,\key,\stub) \in \fp} \WW_{\mkvs}(\key) \)
%\\
%\MW & \( \emptyset \) & \( \SO\rflx \)
%&
%\PSI & \( \dagger \cup \uaWrite[\mkvs,\fp] \) & \( \SO \cup \WR_{\mkvs} \cup \WW_{\mkvs}\)
%\\
%\RYW & \( \clWrite[\mkvs,\cl] \) & \( \emptyset \)
%&
%\CP & \( \dagger  \)  &\(  \ddagger  \)
%\\
%\WFR & \( \emptyset \) & \( \WR_{\mkvs} ; \SO\rflx \)
%&
%$\SI$ & \( \dagger \cup \uaWrite[\mkvs,\fp] \) & \( \ddagger \cup (\WW_\mkvs; \RW_\mkvs) \)
%\\
%\CC & \( \dagger \)  & \( \SO \cup \WR_{\mkvs} \)
%&
%\SER & \( \Set{\txid}[\txid \in \mkvs] \) & \( \emptyset \) \\
%\hline
%\end{tabularx}%
%%
%\begin{align*}
    %\dagger & \equiv 
    %\clRead[\mkvs,\cl] \cup \clWrite[\mkvs,\cl] 
    %\quad \ddagger 
    %\equiv 
    %(\SO ; \RW_{\mkvs}\rflx) \cup (\WR_{\mkvs} ; \RW_{\mkvs}\rflx) \cup \WW_\mkvs 
%\end{align*}
%%
%\begin{align*}
    %\WR_{\mkvs} &\defeq \bigcup_{\key \in \Keys} \WR_\mkvs(\key)
    %& \WR_\mkvs(\key) & \defeq
    %\Set{ (\txid, \txid') }[ \exsts{ i }\txid = \wtOf(\mkvs(\key, i)) \land \txid' \in \rsOf(\mkvs(\key, i))]\\
    %\WW_{\mkvs} &\defeq  \bigcup_{\key \in \Keys} \WW_\mkvs(\key) 
    %& \WW_\mkvs(\key)  & \defeq 
    %\Set{ (\txid, \txid') }[ \exsts{ i, j } \txid = \wtOf(\mkvs(\key, i)) \land \txid' = \wtOf(\mkvs(\key, j)) \land i < j]\\
    %\RW_{\mkvs} &\defeq   \bigcup_{\key \in \Keys} \RW_\mkvs(\key)  
    %& \RW_\mkvs(\key) & \defeq \Set{ (\txid, \txid') }[%
        %\exsts{ i, j } \txid \in \rsOf(\mkvs(\key, i)) \land \txid' = \wtOf[\mkvs(\key, j)]%
        %\land i < j \land \txid \neq \txid'%
    %]
%\end{align*}
%%
%\begin{align*}
    %\lfpTx[\mkvs,\txidset, R] & \defeq \mu X . \txidset \cup R^{-1}(X) \\
    %\extRead[\mkvs,\vi,\fp] & \defeq \Set{\wtOf[\mkvs(\key,\max(\vi(\key)))]}[%
        %\fora{\key,\val} (\otR,\key,\val) \in \fp 
        %\implies 
        %\val = \valueOf[\mkvs(\key,\max(\vi(\key)))]%
    %] \\
    %\clRead[\mkvs,\cl] & \defeq \Set{\wtOf[\mkvs(\key,i)]}[ \exsts{n} \txid_{\cl}^{n} \in \rsOf[\mkvs(\key,i)] ] 
    %\quad \clWrite[\mkvs,\cl] \defeq \Set{\wtOf[\mkvs(\key,i)]}[ \exsts{n} \txid_{\cl}^{n} \in \wtOf[\mkvs(\key,i)] ] \\
    %\Tx[\mkvs, \vi] & \defeq 
    %\Set{ \wtOf[\mkvs(\key, i)] }[ \key \in \Keys \land i \in \vi(\key) ]
    %\quad 
    %\getView[\mkvs, \txidset] \defeq 
    %\lambda \key. \Set{0} \cup \Set{ i }[\wtOf(\mkvs(\key, i)) \in \txidset] \\
    %\uaWrite[\mkvs,\fp] & \defeq \Set{\wtOf[\mkvs(\key,\abs{\mkvs(\key)} - 1)]}[\exsts{\val} (\otW,\key,\val) \in \fp] 
%\end{align*}
%%
%\hrulefill
%%
%\caption{Execution tests of client-centric (left) and data-centric (right) consistency models, 
%with $\SO$ as defined in \cref{subsec:kvstores}. 
%All free variables are universally quantified.
%}
%%\label{fig:execution.tests}
%%\label{fig:execution_tests}
%%\label{fig:execution-tests}
%\end{figure*}
%\fi

\begin{figure*}[!t]
\small
\centering
\begin{tabularx}{\textwidth}{ @{} X r ||  X  r @{} }
\hline
Model & Execution Test: \((\mkvs, \vi) \csat \fp : (\mkvs',\vi')\) &
Model & Execution Test: \((\mkvs, \vi) \csat \fp : (\mkvs',\vi')\)
\\
\hline
\MR & $\vi \viewleq \vi'$
&
\UA & 
$\closed(\mkvs, \vi, \rel_{\UA}(\fp))$
\\
\MW & 
\( \closed(\mkvs, \vi, \SO) \)
&
$\PSI$  &
$\closed(\mkvs, \vi, \rel_{\PSI}(\fp)) \cap \ET_{\MR} \cap \ET_{\RYW}$
\\
\RYW & $ \txid \in \mkvs' \setminus \mkvs \land \wtOf(
\mkvs'(\key, i) ) \toEDGE{\SO\rflx} \txid \implies i \in \vi'(\key) $
&
\CP & 
\(\closed(\mkvs, \vi, \rel_{\CP}) \cap \ET_{\MR} \cap \ET_{\RYW} \)
\\
\WFR & 
\(\closed(\mkvs, \vi, \rel_{\WFR})\)
&
$\SI$ & $\closed(\mkvs,\vi, \rel_{\SI}(\fp)) \cap \ET_\MR \cap \ET_\RYW $
\\
$\CC$ & 
$\closed(\mkvs, \vi, \rel_{\CC}) \cap \ET_{\MR} \cap \ET_{\RYW}$
&
\SER & $\closed(\mkvs,\vi, \WW^{-1})$\\
\hline
\end{tabularx}%
\ac{Some problem with types}
%

{\small
\begin{align*}
    \rel_{\WFR} & \defeq \WR_{\mkvs} ; \SO\rflx &
    \rel_{\UA}(\fp) & \defeq {\textstyle\bigcup_{(\otW, \key, \stub) \in \fp}} \WW^{-1}_{\mkvs}(\key) &
    \rel_{\CP} &\defeq \SO;\RW\rflx \cup \WR;\RW\rflx \cup \WW \\
    \rel_{\CC}  & \defeq \rel_{\WFR} \cup \SO &
    \rel_{\PSI}(\fp) &\defeq \rel_{\CC} \cup \rel_{\UA}(\fp) \cup \WW &
    \rel_{\SI}(\fp) & \defeq \rel_{\CP} \cup \rel_{\UA}(\fp) \cup \WW;\RW\rflx
\end{align*}
}%
%
%\begin{align*}
%    \WR_{\mkvs} &\defeq
%    \Set{ (\txid, \txid') }[ \exsts{ \key, i }\txid = \wtOf(\mkvs(\key, i)) \land \txid' \in \rsOf(\mkvs(\key, i))]\\
%    \WW_{\mkvs} &\defeq 
%    \Set{ (\txid, \txid') }[ \exsts{ \key, i, j } \txid = \wtOf(\mkvs(\key, i)) \land \txid' = \wtOf(\mkvs(\key, j)) \land i < j]\\
%    \RW_{\mkvs} &\defeq
%    \Set{ (\txid, \txid') }[%
%        \exsts{ \key, i, j } \txid \in \rsOf(\mkvs(\key, i)) \land \txid' = \wtOf[\mkvs(\key, j)]%
%        \land i < j \land \txid \neq \txid'%
%    ]
%\end{align*}
%
%\begin{align*}
%    \allowed[R] & \defeq 
%    \Set{(\mkvs, \vi, \fp, \mkvs', \vi')}[ \vi = \getView[\mkvs, \left( \mu X . \Tx[\mkvs,\vi] \cup \rel^{-1}(X) \right) ] ] 
%    \\
%    \getView[\mkvs, \txidset] & \defeq 
%    \lambda \key. \Set{0} \cup \Set{ i }[\wtOf(\mkvs(\key, i)) \in \txidset]  
%    %\lfpTx[\mkvs,\vi, \rel] 
%    %\defeq \mu X .  \Tx[\mkvs,\vi] \cup \rel^{-1}(X) 
%    \quad 
%    \Tx[\mkvs, \vi] \defeq 
%    \Set{ \wtOf(\mkvs(\key, i)) }[ \key \in \Keys \land i \in \vi(\key) ]
%\end{align*}
%
\hrulefill

\caption{Execution tests of client-centric (left) and data-centric (right) consistency models, 
    with $\SO$ as defined in \cref{subsec:kvstores} and \( \WR_\mkvs, \WW_\mkvs, \RW_\mkvs\) in \cref{subsec:cm_examples}.
All free variables are universally quantified.
In the table we 
commit an abuse of notation and let $\closed(\mkvs, \vi, R)$ be the execution test 
$\{(\mkvs, \vi, \fp, \mkvs', \vi') \mid \closed(\mkvs, \vi, R)\}$.   
}
\label{fig:execution.tests}
\label{fig:execution_tests}
\label{fig:execution-tests}
\end{figure*}
