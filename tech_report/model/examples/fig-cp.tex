\begin{figure}

\begin{subfigure}{\textwidth}
\centering
\begin{tikzpicture}%
\KVMapping{x}{\key_1}{
    /\val_0/\txid_0/\Set{\boldsymbol{\txid_{\cl'}^2}}
    , /\val_1/\txid/\Set{\txid_{\cl}^1}
};
\KVMapping[x]{y}{\key_2}{
    /\val_0/\txid_0/\Set{\txid_{\cl}^2}
    , /\val_2/\txid'/\Set{\txid_{\cl'}^1}
};
\end{tikzpicture}%

\caption{Long fork anomaly, disallowed by \(\CP\)}
\label{fig:cp-disallowed}

\end{subfigure} 


\begin{tabularx}{\textwidth}{c | X }
\hline
\begin{subfigure} {0.60\textwidth}
\begin{tikzpicture}%

\node at (0,0) (a) {\(\txid\)};
\node at (2,-1.5) (b) {\(\txid''\)};
\node at (5,0) (c) {\(\txid'\)};

\coordinate (a1) at ($(a) + (3,0)$);
\coordinate (b1) at ($(b) + (5,0)$);
\coordinate (c1) at ($(c) + (3,0)$);

\draw[|-|] (a) -- (a1);
\draw[|-|] (c) -- (c1);
\draw[|-,densely dashed] (b) -- ($(b)!0.5!(b1)$);
\draw[-|] ($(b)!0.5!(b1)$) -- (b1);

\path[->, thick] (a1) edge[bend left=50] node[right, text opacity=1] {\(\WR\) or \(\SO\)} ($(c)+(0.3,0.05)$);
\path[->, thick] (a1) edge[bend left=50] node[right, text opacity=1] {\(\texttt{commit before}\)} (c1);
\path[->, thick] ($(c)+(0.3,-0.05)$) edge node[right, text opacity=1] {\(\RW\)} (b1);
\path[->, thick] (a1) edge node[left, text opacity=1] {\(\texttt{commit before}\)} (b1);

\end{tikzpicture}%
\caption{Commit before relation: \( \WR \), \( \SO \), \( \WR ; \RW \) or \( \WR ; \RW \)}
\label{fig:commit-before-wr-rw}
\end{subfigure} 
&
\begin{subfigure} {0.39\textwidth}
\centering
\begin{tikzpicture}%
\node at (0,0) (a) {\(\txid\)};
\node at (1,-2) (b) {\(\txid'\)};

\coordinate (a1) at ($(a) + (3,0)$);
\coordinate (b1) at ($(b) + (3,0)$);

\draw[|-,densely dashed] (a) -- ($(a)!0.5!(a1)$);
\draw[-|] ($(a)!0.5!(a1)$) -- (a1);

\draw[|-,densely dashed] (b) -- ($(b)!0.5!(b1)$);
\draw[-|] ($(b)!0.5!(b1)$) -- (b1);

\path[->, thick] (a1) edge node[text opacity=1] {\(\WW,\texttt{commit before}\)} (b1);
\end{tikzpicture}%
\caption{Commit before: \(\WW\)}
\label{fig:commit-before-ww}
\end{subfigure} 
\\
\hline 
\end{tabularx}


\caption{Long fork anomaly and commit before relation}
\end{figure}%
