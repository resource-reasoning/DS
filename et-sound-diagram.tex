\begin{figure}[t]
\captionsetup[subfigure]{aboveskip=0pt, belowskip=5pt}
\begin{subfigure}{0.95\textwidth}
\begin{centertikz}%
\node(locx) {$\key_1 \mapsto$};
\path (locx.west) + (-1,0) node (k) {$\hh = $};
\draw pic at ([xshift=\tikzkvspace]locx.east) {vlist={versionx}{%
    /$0$/$\txid_0$/$\emptyset$
    , /$1$/$\txid_1$/$\Set{\txid_2}$
}};

\path (versionx.east) + (3,0) node (locy) {$\key_1 \mapsto$};
\draw pic at ([xshift=\tikzkvspace]locy.east) {vlist={versiony}{%
    /$0$/$\txid_0$/$\emptyset$
    , /$1$/$\txid_1$/$\Set{\txid_2, \txid_3}$
}};

\draw[->,
line join=round,
decorate, decoration={
    zigzag,
    segment length=4,
    amplitude=.9,post=lineto,
    post length=2pt
}
] ($(versionx.east) + (0.5,0)$) -- ($(locy.west) + (-0.5,0)$);
\path (versiony.east) + (1,0) node (k1) {$= \hh'$};

\end{centertikz}%
\caption{Commit \( \txid_3 \) in kv-store}
\label{fig:et-sound-kv-store-update}
\end{subfigure}

\hrulefill

\begin{subfigure}{0.95\textwidth}
\begin{centertikz}[.66]%
\draw pic {transaction={t0}{%
        /$\otW$/$\key_1$/$0$%
}};
\path(t0.west) + (0,0) node[anchor=east] (a0) {$\aexec = $};
\path(t0.north) node[anchor=south] (t0lbl) {$\txid_0$};

\draw pic at ($(t0.east) + (1.6,0.15)$) {transaction={t1}{%
        /$\otW$/$\key_1$/$1$%
}};
\path(t1.north) node[anchor=south] (t1lbl) {$\txid_1$};

\draw pic at ($(t1.east) + (1.6,0.15)$) {transaction={t2}{%
        /$\otR$/$\key_1$/$1$%
}};
\path(t2.north) node[anchor=south] (t2lbl) {$\txid_2$};

\path[->]
(t0.east) edge node[above, yshift=0pt, xshift=0pt, pos=0.5] {$\VIS$} (t1.west)
(t0.south) edge[bend right=20] node[above, yshift=0pt, xshift=0pt, pos=0.5] {$\VIS$} (t2.south)
(t1.east) edge node[above, yshift=0pt, xshift=0pt, pos=0.5] {$\VIS$} (t2.west);

\draw pic at ($(t2.east) + (2,0.15)$) {transaction={t00}{%
        /$\otW$/$\key_1$/$0$%
}};
\path(t00.north) node[anchor=south] (t00lbl) {$\txid_0$};

\draw pic at ($(t00.east) + (2,0.15)$) {transaction={t11}{%
        /$\otW$/$\key_1$/$1$%
}};
\path(t11.north) node[anchor=south] (t11lbl) {$\txid_1$};

\draw pic at ($(t11.east) + (2,0.15)$) {transaction={t22}{%
        /$\otR$/$\key_1$/$1$%
}};
\path(t22.north) node[anchor=south] (t22lbl) {$\txid_2$};

\draw pic at ($(t22.east) + (2,0.15)$) {transaction={t3}{%
        /$\otR$/$\key_1$/$1$%
}};
\path(t3.east) + (0,0) node[anchor=west] (a1) {$= \{\aexec_1, \aexec_2\}$};
\path(t3.north) node[anchor=south] (t3lbl) {$\txid_3$};

\path[->]
(t00.east) edge node[above, yshift=0pt, xshift=0pt, pos=0.5] {$\VIS$} (t11.west)
(t00.south) edge[bend right=17] node[above, yshift=0pt, xshift=0pt, pos=0.5] {$\VIS$} (t22.south)
(t00.south) edge[bend right=17] node[above, yshift=0pt, xshift=0pt, pos=0.5] {$\VIS$} (t3.south)
(t11.north east) edge[bend left=28] node[above, yshift=0pt, xshift=0pt, pos=0.5] {$\VIS$} (t3.north west)
(t11.east) edge node[above, yshift=0pt, xshift=0pt, pos=0.5] {$\VIS$} (t22.west);

\path[densely dotted,->]
(t22.east) edge node[above, yshift=0pt, xshift=0pt, pos=0.5] {$\VIS$} (t3.west);

\draw[->,
line join=round,
decorate, decoration={
    zigzag,
    segment length=4,
    amplitude=.9,post=lineto,
    post length=2pt
}
] ($(t2.east) + (0.3,0)$) -- ($(t00.west) + (-0.3,0)$);

\end{centertikz}%
\vspace{-5pt}
\caption{Committing \( \txid_3 \) in abstract executions. For simplicity, arbitration edges have been omitted}
\label{fig:et-sound-aexec-update}
\end{subfigure}

\hrulefill

\label{fig:et-sound-to-aexec}
\caption{Correspondence between committing \( \txid_3 \) in kv-stores and abstract executions. 
The figure to the right denotes a set of abstract executions, which differ in the presence of the dashed visibility edge.}
\end{figure}
