\subsection{Parallel Snapshot Isolation \(\PSI\)}
\label{sec:sound-complete-psi}

The axiomatic definition for \( \PSI \) is 
\[ 
    (\RP_{\LWW}, \Set{\lambda \aexec. \VIS_{\aexec} ; \VIS_{\aexec}, \lambda \aexec \ldotp \SO_\aexec, \lambda \aexec. \WW_\aexec })
\]
Given the definition, there is a corresponding definition on dependency graph by solve the following inequalities:
\[
    \begin{array}{@{}l@{}}
        \WR \subseteq \VIS \\
        \WW \subseteq \VIS \\
        \SO \subseteq \VIS \\
        \VIS ; \VIS \subseteq \VIS 
    \end{array}
\]
We have \( \VIS = (\WR \cup \WW \cup \SO \cup R) \) for some \( R \subseteq \AR \).
Thus, there exist a minimum visibility such that 
\[ 
    (\RP_{\LWW}, \Set{\lambda \aexec. (\WR_{\aexec} \cup \WW_{\aexec} \cup \SO ) ; \VIS_{\aexec}, \lambda \aexec \ldotp \SO_\aexec, \lambda \aexec. \WW_\aexec })
\]

To prove soundness, we pick an invariant for the \( \ET_\PSI \) as the union of those for \( \MR\) and \( \RYW \) shown in the following:
\begin{align*}
    I_1(\aexec, \cl) & =  \left( \bigcup_{\Set{\txid_{\cl}^{n} \in \txidset_{\aexec} }[ n \in \Nat ]} \VIS_{\aexec}^{-1}(\txid^n_\cl) \right) \setminus \txidset_\rd \\
    I_2(\aexec, \cl) & =  \left( \bigcup_{\Set{\txid_{\cl}^{n} \in \txidset_{\aexec} }[ n \in \Nat ]} (\SO_{\aexec}^{-1})\rflx(\txid^n_\cl) \right) \setminus \txidset_\rd
\end{align*}
where \( \txidset_\rd \) is all the read-only transactions included in both 
\( \left( \bigcup_{\Set{\txid_{\cl}^{n} \in \txidset_{\aexec} }[ n \in \Nat ]} \VIS_{\aexec}^{-1}(\txid^n_\cl) \right)\) 
and \( \left( \bigcup_{\Set{\txid_{\cl}^{n} \in \txidset_{\aexec} }[ n \in \Nat ]} (\SO_{\aexec}^{-1})\rflx(\txid^n_\cl) \right) \).
Assume a kv-store $\mkvs$, an initial and a final view $\vi, \vi'$  a fingerprint $\fp$ 
such that $\ET_{\PSI} \vdash (\mkvs, \vi) \triangleright \fp: \vi'$. 
Also choose an arbitrary $\cl$, a transaction identifier $\txid_\cl^n \in \nextTxid(\mkvs, \cl)$, 
and an abstract execution $\aexec$ such that $\mkvs_{\aexec} = \mkvs$ and 
\( I_1(\aexec, \cl) \cup I_2(\aexec, \cl) \subseteq \Tx[\mkvs, \vi] \).
Let a new abstract execution \( \aexec' = \extend[\aexec, \txid_\cl^n, \fp, \Tx[\mkvs, \vi] \cup \txidset_\rd] \).
We are about to prove there exists an extra set of read-only transactions \( \txidset'_\rd \) such that:
\begin{gather}
    \fora{\txid} (\txid, \txid_\cl^n) \in \SO_{\aexec'} \implies \txid \in \Tx[\mkvs, \vi] \cup \txidset_\rd \cup \txidset'_\rd \label{equ:psi-sound-update-so}\\
    \fora{\txid} (\txid, \txid_\cl^n) \in \WW_{\aexec'} \implies \txid \in \Tx[\mkvs, \vi] \cup \txidset_\rd \cup \txidset'_\rd \label{equ:psi-sound-update-ua}\\
    \fora{\txid} (\txid, \txid_\cl^n) \in ( \SO_{\aexec'} \cup \WR_{\aexec'} \cup \WW_{\aexec'} )^{+} ; \VIS_{\aexec'} \implies \txid \in \Tx[\mkvs, \vi] \cup \txidset_\rd \cup \txidset'_\rd \label{equ:psi-sound-update-visvis}\\
    I_1(\aexec',\cl) \cup I_2(\aexec',\cl) \subseteq \Tx[\mkvs_{\aexec'}, \vi'] \label{equ:psi-sound-inv} 
\end{gather}
\begin{itemize}
\item The invariant \( I_2 \) implies \cref{equ:psi-sound-update-so} as the same as \( \RYW \) in \cref{sec:sound-complete-ryw}.
\item Since \( \PSI \) also satisfies \( \UA \), the \cref{equ:si-sound-update-ww} can be proven as the same as \( \UA \) in \cref{sec:sound-complete-ua}.

\item Finally the new abstract execution preserves the invariant \( I_1 \) and \( I_2 \) 
because  \( \CC \) satisfies \( \MW \) and \( \RYW \).
\end{itemize}


First the completeness follows \( \CC \) in \cref{sec:sound-complete-cc} and \( \UA \) in \cref{sec:sound-complete-ua}.
Similarly, by \cref{lem:aexec-spec-cc},
Given the minimum visibility, the soundness proof follows \( \CC \) in \cref{sec:sound-complete-cc} and \( \UA \) in \cref{sec:sound-complete-ua}.
